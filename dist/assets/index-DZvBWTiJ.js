(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function c(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(r){if(r.ep)return;r.ep=!0;const d=c(r);fetch(r.href,d)}})();const R=document.querySelector("#manageInventoryBtn");document.querySelector("#app");const a=document.querySelector("#productSideBar"),h=document.querySelector("#removeSideBarBtn");document.querySelector("#productCreateForm");const s=document.querySelector("#newProductName"),i=document.querySelector("#newProductPrice"),P=document.querySelector("#addNewProductBtn"),g=document.querySelector("#productGroup"),B=document.querySelector("#productCardTemplate"),x=document.querySelector("#productSelect"),m=document.querySelector("#createRecordForm"),C=document.querySelector("#recordRowTemplate"),l=document.querySelector("#recordGroup"),L=document.querySelector("#recordTotal"),I=document.querySelector("#recordTax"),A=document.querySelector("#recordNetTotal"),N=document.querySelector("#checkout"),n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function E(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}let p;const O=new Uint8Array(16);function U(){if(!p){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");p=crypto.getRandomValues.bind(crypto)}return p(O)}const D=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),q={randomUUID:D};function y(e,t,c){var r;if(q.randomUUID&&!e)return q.randomUUID();e=e||{};const o=e.random??((r=e.rng)==null?void 0:r.call(e))??U();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,E(o)}const w=[{id:1,name:"Apple",price:500},{id:2,name:"Banana",price:300},{id:3,name:"Orange",price:300},{id:4,name:"Strawberry",price:600},{id:5,name:"Grapes",price:300}],F=()=>{const e=y();g.append(f(e,s.value,i.valueAsNumber)),x.append(new Option(`${s.value} - ${i.valueAsNumber}`,e)),w.push({id:e,name:s.value,price:i.valueAsNumber}),s.value=null,i.value=null},$=e=>{e.forEach(({id:t,name:c,price:o})=>{g.append(f(t,c,o)),x.append(new Option(`${c} - ${o}`,t))})},f=(e,t,c)=>{const o=B.content.cloneNode(!0),r=o.querySelector(".product-name"),d=o.querySelector(".product-price"),u=o.querySelector(".product-card");return u.id=y(),r.innerText=t,d.innerText=c+" MMK",o},G=()=>{$(w)},H=()=>{a.classList.remove("translate-x-full"),a.classList.add("duration-300")},Y=()=>{a.classList.add("translate-x-full"),a.classList.add("duration-300")},k=()=>{console.log("Checkout"),window.print()},M=e=>{e.preventDefault();const t=new FormData(m),c=w.find(({id:r})=>r==t.get("product_select")),o=document.querySelector(`[product-id='${c.id}']`);o==null?l.append(V(c,t.get("quantity"))):Swal.fire({title:`Are you sure to add quantity to ${c.name} ?`,text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, add it!"}).then(r=>{r.isConfirmed&&(b(o.getAttribute("row-id"),parseInt(t.get("quantity"))),Swal.fire({title:"Added!",text:"Your record has been added.",icon:"success"}))}),m.reset()},V=({id:e,name:t,price:c},o)=>{const r=C.content.cloneNode(!0),d=r.querySelector(".record-product-name"),u=r.querySelector(".record-product-price"),v=r.querySelector(".record-product-quantity"),T=r.querySelector(".record-cost"),S=r.querySelector(".record-row");return S.setAttribute("product-id",e),S.setAttribute("row-id",y()),d.innerText=t,u.innerText=c,v.innerText=o,T.innerText=c*o,r},Q=(e,t=5)=>e/100*t,K=()=>{let e=0;return l.querySelectorAll(".record-cost").forEach(t=>e+=parseFloat(t.innerText)),e},j=e=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&(document.querySelector(`[row-id='${e}']`).remove(),Swal.fire({title:"Deleted!",text:"Your record has been deleted.",icon:"success"}))})},b=e=>{const t=document.querySelector(`[row-id='${e}']`),c=t.querySelector(".record-product-price"),o=t.querySelector(".record-product-quantity"),r=t.querySelector(".record-cost");o.innerText=parseInt(o.innerText)+1,r.innerText=parseFloat(c.innerText)*parseInt(o.innerText)},_=e=>{const t=document.querySelector(`[row-id='${e}']`),c=t.querySelector(".record-product-price"),o=t.querySelector(".record-product-quantity"),r=t.querySelector(".record-cost");o.innerText>1&&(o.innerText=parseInt(o.innerText)-1,r.innerText=parseFloat(c.innerText)*parseInt(o.innerText))},z=e=>{if(e.target.classList.contains("record-remove")){const t=e.target.closest(".record-row");j(t.getAttribute("row-id"))}else if(e.target.classList.contains("quantity-add")){const t=e.target.closest(".record-row");b(t.getAttribute("row-id"))}else if(e.target.classList.contains("quantity-sub")){const t=e.target.closest(".record-row");_(t.getAttribute("row-id"))}},J=()=>{const e={childList:!0,subtree:!0},t=()=>{const o=K(),r=Q(o);L.innerText=o,I.innerText=r,A.innerText=o+r};new MutationObserver(t).observe(l,e)},W=()=>{R.addEventListener("click",H),h.addEventListener("click",Y),P.addEventListener("click",F),m.addEventListener("submit",M),l.addEventListener("click",z),N.addEventListener("click",k)},X=()=>{J()};class Z{init(){console.log("Invoice app start"),W(),G(),X()}}const ee=new Z;ee.init();
